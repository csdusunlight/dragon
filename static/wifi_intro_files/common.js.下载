$(function() {

	////点击产品中心下拉产品分类
	//$('.nav li:eq(0) a').click(function() {
	//	if ($('.product-nav').css('display') == 'none') {
	//		$(this).addClass('active');
	//		$('.product-nav').slideDown('fast');
	//	} else {
	//		$(this).removeClass('active');
	//		$('.product-nav').slideUp('fast');
	//	}
    //});

    var $hsecnav = $('.home-second-nav');
	var flag = false;

	$('.nav li:eq(0), .home-second-nav').hover(function() {
		flag = true;
		setTimeout(function() {
			if (flag) {
				if ($hsecnav.css('display') === 'none') {
					// $('.home-second-nav').slideDown();
					$hsecnav.removeClass('slideup')
							.css('display', 'block')
							.addClass('slidedown');
				}
			}
		}, 100);
	}, function() {
		flag = false;
		setTimeout(function() {
			if (!flag) {
				if ($hsecnav.css('display') === 'block') {
					// $('.home-second-nav').slideUp();
					$hsecnav.removeClass('slidedown')
							.addClass('slideup');
					setTimeout(function() {
						$hsecnav.css('display', 'none');
					}, 500);
				}
			}
		}, 1000);
	});

	// 搜索栏展开关闭
	$('.search span').on('click', function () {
		if (!$(this).hasClass('search-bg-active')) {
			$(this).addClass('search-bg-active');
			$(this).parent().parent().addClass('search-active').animate({ width: '149px' }, 'fast');
			$(this).prev('input').css({ display: 'block', paddingRight: '35px', paddingLeft: '16px' });
			$(this).prev('input').focus();
			$(this).blur();
		} else {
			if ($('.search input').val() !== '') {
				$('.search form').submit();
			} else {
				$(this).prev('input').css('padding', '0 35px 0 0');
				$(this).parent().parent().animate({ width: '35px' }, 'fast', function () {
					$(this).children().children('input').css('display', 'none');
					$(this).removeClass('search-active');
					$(this).children().children('span').removeClass('search-bg-active');
					$(this).prev('input').blur();
					$(this).children().children('span').blur();
				});
			}
		}
	});

    //var originalIndex = $('.list li a.active').parent().index();
    //var curIndex = $('.list li a.active').parent().index();
    //$('.line').css('left', originalIndex * 182 + 'px');
    //$('.download-nav li').mouseenter(function () {
    //    var toIndex = $(this).index();
    //    move(curIndex, toIndex);
    //    curIndex = toIndex;
    //});
    //$('.download-nav ul').mouseleave(function () {
    //    var toIndex = originalIndex;
    //    move(curIndex, toIndex);
    //    curIndex = toIndex;
    //});

	//控制产品列表显示
	var totalWidth = 0;
	$('.product-list li').each(function(index, el) {
		totalWidth += $(this).width();
		if (!(totalWidth % 1200)) {
			$(this).css('margin-right', '0px');
		} else {
			totalWidth += 20;
		}
	});

	//控制搜索列表显示
	totalWidth = 0;
	$('.search-list .globle-container>ul>li').each(function(index, el) {
		totalWidth += $(this).width();
		if (!(totalWidth % 1200)) {
			$(this).css('margin-right', '0px');
		} else {
			totalWidth += 20;
		}
		//控制搜索列表硬件版本显示
		var totalWidth2 = 0;
		$(this).find('li').each(function(index, el) {
			totalWidth2 += ($(this).width() + 2);
			if (!(totalWidth2 % 310)) {
				$(this).css('margin-right', '0px');
			} else {
				totalWidth2 += 10;
			}
		});
    });

    //控制视频列表显示
    rankLi('.videoList li', 1198);

});

//控制排列显示
function rankLi(obj, width) {
	var totalWidth = 0;
	$(obj).each(function(index, el) {
		totalWidth += $(this).width();
		if (!(totalWidth % width)) {
			$(this).css('margin-right', '0px');
		} else {
			totalWidth += 20;
		}
	});
}

function move(curIndex, toIndex) {
    //var dis = (toIndex - curIndex > 0) ? (toIndex - curIndex) * 168 : (toIndex - curIndex + 1) * 168;
    var dis = (toIndex - curIndex) * 182;
    $('.line').stop(false, true).animate({ left: '+=' + dis + 'px' }, 300);
}
